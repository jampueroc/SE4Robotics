---
layout: post
title:  "Inicio proyecto RQT_GRAPH"
date:   2015-09-26 09:00:00
author: Pablo - Jorge
categories: Reporte
---

# Introducción

ROS es un framework para el desarrollo de software para robots. Éste se basa en un sistema de nodos que reciben y envían mensajes entre ellos. Actualmente existen herramientas visuales que permiten mostrar al usuario la interacción entre estos nodos, pero presentan algunos problemas que no permiten al usuario entender el sistema de una manera simple y rápida.

Nosotros somos Jorge Ampuero y Pablo Polanco, estudiantes de Ingeniería Civil en Computación de la Universidad de Chile y como proyecto hemos decidido trabajar sobre la visualización de la interacción nodo-tópico en ROS, de forma que realicemos una contribución al software.

Para ello se realizaron varias actividades inicialmente, de manera de conocer y poder identificar los problemas existentes. A continuación se detallarán los resultados de la investigación hecha.


# Problema

Tal como se nombró antes, ROS tiene un sistema de visualización de interacción nodo-tópico llamado rqt_graph. En este se muestran todos los nodos actualmente operativos y los tópicos relacionados entre ellos. Esto hace que la herramienta sea útil para realizar debugging o entender el funcionamiento básico de los nodos. Pero este sistema tiene ciertas fallas o carencias para realizar un buen debug.

Dentro de los problemas detectados se encuentran:

1. No entrega información de tipos-datos: Si bien se realiza un diagrama donde se muestran las relaciones, no existe forma de saber el tipo de datos que reciben, entregan o a qué corresponde el nodo/tópico. Esto no es problema directamente pero uno de los grandes usos que se le da a rqt_graph es debug, por lo que se vuelve un elemento muy importante en la visualización.

2. Exceso de tópicos/nodos/información en pantalla: rqt_graph da la opción de ocultar los nodos que se encuentran inactivos, pero cuando se realiza debugging de un tópico o nodos específicos y es necesario tener otros nodos activos, estos últimos no desaparecen, imposibilitando al usuario de concentrarse en la relación a trabajar. Esto sucede bajo casos donde el número de nodos y tópicos es muy grande. Además, el exceso de tópicos, nodos y nombres en la pantalla complican y entorpecen la visualización correcta de los elementos objetivo.

3. Datos en tiempo real: Las relaciones que se muestran son estáticas, de forma que no es posible mostrar la información que va pasando a través de los tópicos, así como tampoco es posible ver la data que los nodos reciben o envían.

4. Interacción en tiempo real: Cuando un usuario esta debuggeando un programa trata de enviar información a través de los canales, de forma tal que pueda asegurar la buena conexión entre los nodos. Al usarse rqt_graph como un método de debugging este no entrega una posibilidad de envío de mensajes a través de tópicos, lo cual muestra una falencia en la herramienta a la hora de usarla.

Estos problemas no son completamente cruciales en ROS, pero si retrasan el trabajo de los usuarios (tanto primerizos como quienes utilizan múltiples conexiones entre nodos).

# Solución

 La idea es corregir y agregar las funcionalidades anteriormente planteadas. Para ello se optó como primera opción modificar rqt_graph, pero esto conduce a realizar modificaciones en diferentes niveles de ROS además de problemáticas con la adquisición de información en tiempo real, por lo que se descartó.
 
 Como una de las mayores problemáticas son los cambios en el tiempo, se decidió crear una aplicación en Pharo de forma que alteración en la información presente sea fácilmente visualizable.
 
 La aplicación recibirá información desde ROS y mostrará los nodos y sus relaciones pertinentes. Además, tendrá la capacidad de ocultar la información que el usuario estime conveniente.
 
 También es posible verificar los tipos de datos enviados y/o recibidos, velocidad de publicación, nodo emisor/receptor, entre otras informaciones útiles.
 
 
-- Qué requerimientos necesita la aplicación que solucione el problema.

-- Lista detallada de las funcionalidades que va a brindar su proyecto.

# Diseño de la solución

-- Describir la solución (arquitectura, diseño, mockups, según corresponda)

-- Limitaciones su solución

-- Testing: Como probarán la solución?

-- Validación: Como validarán la solución?

-- Contactos de ROS con la que pretenden tener contacto para desarrollar/validar la solución



##MOCKUP
Para el diseño gráfico se pensó en una ventana dividida en la cual el lado  izquierdo contiene el gráfico de los nodos y en la parte superior las opciones para la visualización de los nodos y tópicos. Al lado derecho se ven los detalles de las opciones elegidas.
![MOCKUP #1]({{site.baseurl}}/assets/reports/001.PNG )

Al hacer click en el lado derecho en alguna de las opciones, estó se ve reflejado de manera automática en el grafo del lado izquierdo. Por ejemplo, en la siguiente imagen se muestra la barra de busqueda que permite buscar de manera mas simple un nodo para poder desmarcarlo y que no se visualice en el grafo.
![MOCKUP #2]({{site.baseurl}}/assets/reports/002.PNG )

En la siguiente imagen se muestra la información de un tópico/nodo que aparecerá al hacer doble click.
![MOCKUP #3]({{site.baseurl}}/assets/reports/003.PNG )



#Cronograma de trabajo
* Semana1: How to pharo / basic examples Roassal
* Semana2: Implementar interfaz gráfica básica
* Semana3: Agregar gráfica básica.
* Semana4: Agregar funcionalidad interfaz-ROS.
* Semana5: Visualización de data. (Info de nodo/topicos)
* Semana6: Agrupar tópicos, nodos .  Investigación de mensajes. (**** tópicos, nodos)
* Semana7: Creación de mensajes. (**** tópicos, nodos)
 

# Conclusión

